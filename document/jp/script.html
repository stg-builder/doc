<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<title>Shooting Game Builder</title>
</head>
<link rel="stylesheet" type="text/css" href="../../index.css">

<BODY>
	<a name="TOP" id="TOP"></a>
	<IMG SRC="../../png/A_160x80.png">
	<a href="manual.html">■元のページへ戻る</a>
	<hr>

	<div class="main2">
		<section>
			<IMG SRC="png/script00.png">
			<H1>スクリプト編集</H1>
			キャラクタの動作を詳細にコントロールしたい。何もかも自前で処理したい<BR>
			そういった機能を一部提供するのがスクリプトです
			<P></P>
			<a href="common.html">■編集ウインドウ共通操作ヘルプはこちら</a>
			<P></P>
			<div class="main3">
				<section>
					<H5>コマンド詳細</H5>
					<a name="command"></a>
					<div class="main4">
						<section>
							<a href="script_label.html">ラベル</a>
						</section>
						<section>
							<a href="script_ctrl.html">制御</a>
						</section>
					</div>
					<div class="main4">
						<section>
							<a href="script_move.html">移動</a>
						</section>
						<section>
							<a href="script_attack.html">攻撃</a>
						</section>
					</div>
					<div class="main4">
						<section>
							<a href="script_draw.html">描画</a>
						</section>
						<section>
							<a href="script_sound.html">サウンド</a>
						</section>
					</div>
					<div class="main4">
						<section>
							<a href="script_scroll.html">背景</a>
						</section>
						<section>
							<a href="script_score.html">スコア</a>
						</section>
					</div>
					<div class="main4">
						<section>
							<a href="script_var.html">変数</a>
						</section>
						<section>
						</section>
					</div>
				</section>
			</div>
		</section>
	</div>

	<div class="main4">
		<section>
			<UL>
				<LI>制御フィールド<BR>右側の青丸が格子状に並んだ場所が制御フィールドになります。ここに制御パネルを配置します</LI>
				<LI>制御パネル<BR>制御パネルはいくつかのグループに分かれており、パネルの色で識別できます。左側のタブを切り替えると配置可能な制御パネルが現れます。
					配置したいパネルが見つかったら、それを右側の制御フィールドへドラッグします。（すでにあるパネルの上にドロップすると置き換えてしまうので注意）
					すでに配置した制御パネルを移動したい場合は、制御フィールド上でドラッグしてください</LI>

				<LI>実行順とGATE<BR>
					スクリプト実行プログラムは一定の法則に従って制御パネルを実行します。
					制御フィールドの左上隅「GATE」から下矢印が伸びています。
					この「GATE」と呼ばれる位置が実行開始位置となります。
					ゲートから開始された制御パネルは特に何もない限り、下方向へ順繰りに実行されていきます
					（制御パネル間に小さい矢印が出てるので実行方向は目視可能です）
					制御パネルが存在しない領域はそのまま下方向へ通過します。
					最下段まで実行された場合は再び「GATE」から実行されます
				</LI>

				<LI>スクリプトパラメータ<BR>全制御パネルにはスクリプトパラメータと呼ばれるいくつかの制御値を持っています。これらは配置した制御パネルをクリックし、ウインドウ上部の編集パネルで設定可能です</LI>
				<LI>ウエイト<BR>一部を除く制御パネルにはウエイトが設定できます。ウエイトを設定すると、そのパネルを実行後、設定された時間が経過するまで次のパネルへ移動しません。時間を経過させずに無限ループさせるとデッドロックするので注意してください
					<UL>
						<LI>時間待ちしない<BR>そのパネルの実行内容が終了しなくても次のパネルへ移動します</LI>
						<LI>動作完了まで待つ<BR>そのパネルの実行内容が完了すると次のパネルへ移動します。実行内容が即時終了するような場合は時間の経過はありません</LI>
						<LI>指定フレーム数待つ<BR>そのパネルの実行内容にかかわらず指定したフレーム数が経過後、次のパネルへ移動します</LI>
					</UL>
				</LI>
				<LI>パネルの実行が終わっていないのに次へ移動してもいいか？<BR>
					終了を待たずに次のパネルへ移動した場合、バックグラウンド（見かけ上）で実行され続けます。が、まったく同じ制御パネルを実行しようとすると前回実行中の内容は停止してしまいます。違うパネル（例えば移動と回転と攻撃）であれば全て並列に実行可能です
				</LI>
				<LI>パネルサイズ<br>1x1～32x32内で自由に設定できます</LI>
			</UL>
		</section>
	</div>

	<div class="main2">
		<section>
			<h5>時間待ち</h5>
			多くの制御パネルは時間待ちの設定ができます。3種類から待ち方を選択できます
			<UL>
				<LI>無し<BR>即時次の制御パネルを実行します</LI>
				<LI>動作完了まで<BR>その制御パネルが指定動作を終了すると次の制御パネルを実行します</LI>
				<LI>フレーム数<BR>指定したフレーム数経過すると次の制御パネルを実行します</LI>
			</UL>
			<b>時間待ち無しを設定した制御パネルを大量に配置すると、実行時に「無限ループを検出しました」とエラーが出ることがあります</b>
		</section>
		</div>

	<div class="main4">
		<section>
			<h5>進行方向</h5>
			次に実行する制御パネルを指定します
		</section>
		</div>

	<div class="main2">
		<section>
			<H5>パネルの複数選択とコピペ</H5>
			制御パネルはCTRL+左クリック(SHIFT+左クリックでも可)で複数を選択できます（選択中のパネルには白い枠がつきます）。
			また、制御フィールドを左ドラッグで範囲選択することも可能です。
			この状態でパネルを右クリックするとメニューが開くので実行したいコマンドを選んでください
			<ul>
				<li>コピー<br>選択中のパネルをクリップボードへコピーします</li>
				<li>カット<br>選択中のパネルをクリップボードへコピーし、パネルを消去します</li>
				<li>ペースト<br>クリップボードへコピーされたパネルをカーソル位置へ書き出します</li>
				<li>ゲート作成<br>ゲートは左上隅にのみ作成可能です。ゲートが存在しない場合、そのタスクは実行されません(継承スクリプト、デフォルトスクリプトの説明を参照)</li>
				<li>ゲート削除<br>ゲートを削除します</li>
				<li>メモ編集<br>パネルにメモを付与します。内容は画面下のテキストボックスで行います</li>
				<li>メモ削除<br>パネルに付与されたメモを削除します</li>
			</ul>
		</section>
	</div>


	<div class="main4">
		<section>
			<H5>マルチタスク</H5>
			スクリプトは同時に16タスクまで実行させることができます（ユーザーが自由に使えるのは8タスクまで）。別のタスクを編集するときは「タスクコンボボックス」で切り替えてください

			他のタスクを編集する時の注意点
			<ul>
				<li>ゲートを作成することを忘れないでください<br>ゲートが無ければ実行されません(継承スクリプト、デフォルトスクリプトの説明を参照)</li>
				<li>ラベルはタスク単位でローカルです<br>他のタスクへはジャンプできません</li>
				<li>ループカウンタはタスク単位でローカルです<br>他のタスクには影響を与えません</li>
				<li>変数、シグナル等は全タスク共通です<br>重複しないようにしてください</li>
				<li>メインタスク以外のユーザータスクは手動起動です<br>「タスク開始」コマンドで起動してください</li>
			</ul>
		</section>
	</div>


	<div class="main2">
		<section>
			<H5>自動起動</H5>
			タスクの中にはシステムが自動的に起動するものがあります
			<ul>
				<li>攻撃ヒット<br>相手に攻撃が命中した時に自動起動されます</li>
				<li>防御ヒット<br>相手から攻撃を受けたときに自動起動されます（破壊時には呼ばれません）</li>
				<li>破壊<br>体力が0になり破壊されたときに自動起動されます</li>
				<li>メニュー<br>メニュー専用のタスクです。起動は手動になります</li>
				<li>プレイヤー<br>プレイヤー出現時に起動します</li>
				<li>壁ヒット<br>壁（当たり判定のある背景）に当たった時に起動します</li>
			</ul>
		</section>
	</div>

	<div class="main4">
		<section>
			<H5>継承スクリプトとデフォルトスクリプト</H5>
			必要なスクリプトを記述しなかった（タスクにGATEが存在しない）場合は継承スクリプトとして登録してあるスクリプトが実行されます<br>
			継承スクリプトにも存在していなかった、もしくは未登録の場合はデフォルトスクリプトと呼ばれるシステムが提供するスクリプトが実行されます
			<br>
			つまり、ユーザーが何もスクリプト記述しなくてもデフォルトスクリプトが起動するため基本動作を省略することが可能です<br>
			<br>
			全キャラクタ共通処理などを継承スクリプトとして作成しておけば手間が省けるでしょう
		</section>
	</div>
<p></p>


	<HR>
	<a href="#TOP">■ページ上部へ戻る</a><br>
</BODY>

</html>